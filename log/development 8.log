Started GET "/movie.php" for 127.0.0.1 at 2017-11-29 19:32:34 +0300
  
PG::ConnectionBad (could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/tmp/.s.PGSQL.5432"?
):
  
pg (0.19.0) lib/pg.rb:45:in `initialize'
pg (0.19.0) lib/pg.rb:45:in `new'
pg (0.19.0) lib/pg.rb:45:in `connect'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:671:in `connect'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:217:in `initialize'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `new'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:729:in `new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:773:in `checkout_new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:752:in `try_to_checkout_new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:713:in `acquire_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:490:in `checkout'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:364:in `connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:883:in `retrieve_connection'
activerecord (5.0.3) lib/active_record/connection_handling.rb:128:in `retrieve_connection'
activerecord (5.0.3) lib/active_record/connection_handling.rb:91:in `connection'
activerecord (5.0.3) lib/active_record/migration.rb:559:in `connection'
activerecord (5.0.3) lib/active_record/migration.rb:546:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.3) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.3) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.3) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.3) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.3) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.3) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.3) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.0.3) lib/rails/engine.rb:522:in `call'
puma (3.9.0) lib/puma/configuration.rb:224:in `call'
puma (3.9.0) lib/puma/server.rb:602:in `handle_request'
puma (3.9.0) lib/puma/server.rb:435:in `process_client'
puma (3.9.0) lib/puma/server.rb:299:in `block in run'
puma (3.9.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (2.4ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.5ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.5ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (163.1ms)
Started GET "/" for 127.0.0.1 at 2017-11-29 19:32:35 +0300
  
PG::ConnectionBad (could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/tmp/.s.PGSQL.5432"?
):
  
pg (0.19.0) lib/pg.rb:45:in `initialize'
pg (0.19.0) lib/pg.rb:45:in `new'
pg (0.19.0) lib/pg.rb:45:in `connect'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:671:in `connect'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:217:in `initialize'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `new'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:729:in `new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:773:in `checkout_new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:752:in `try_to_checkout_new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:713:in `acquire_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:490:in `checkout'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:364:in `connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:883:in `retrieve_connection'
activerecord (5.0.3) lib/active_record/connection_handling.rb:128:in `retrieve_connection'
activerecord (5.0.3) lib/active_record/connection_handling.rb:91:in `connection'
activerecord (5.0.3) lib/active_record/migration.rb:559:in `connection'
activerecord (5.0.3) lib/active_record/migration.rb:546:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.3) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.3) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.3) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.3) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.3) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.3) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.3) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.0.3) lib/rails/engine.rb:522:in `call'
puma (3.9.0) lib/puma/configuration.rb:224:in `call'
puma (3.9.0) lib/puma/server.rb:602:in `handle_request'
puma (3.9.0) lib/puma/server.rb:435:in `process_client'
puma (3.9.0) lib/puma/server.rb:299:in `block in run'
puma (3.9.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (3.0ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.4ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (8.2ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (121.7ms)
Started GET "/movie.php" for 127.0.0.1 at 2017-11-29 19:32:35 +0300
  
PG::ConnectionBad (could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/tmp/.s.PGSQL.5432"?
):
  
pg (0.19.0) lib/pg.rb:45:in `initialize'
pg (0.19.0) lib/pg.rb:45:in `new'
pg (0.19.0) lib/pg.rb:45:in `connect'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:671:in `connect'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:217:in `initialize'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `new'
activerecord (5.0.3) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:729:in `new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:773:in `checkout_new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:752:in `try_to_checkout_new_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:713:in `acquire_connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:490:in `checkout'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:364:in `connection'
activerecord (5.0.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:883:in `retrieve_connection'
activerecord (5.0.3) lib/active_record/connection_handling.rb:128:in `retrieve_connection'
activerecord (5.0.3) lib/active_record/connection_handling.rb:91:in `connection'
activerecord (5.0.3) lib/active_record/migration.rb:559:in `connection'
activerecord (5.0.3) lib/active_record/migration.rb:546:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'
activesupport (5.0.3) lib/active_support/callbacks.rb:97:in `__run_callbacks__'
activesupport (5.0.3) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'
activesupport (5.0.3) lib/active_support/callbacks.rb:90:in `run_callbacks'
actionpack (5.0.3) lib/action_dispatch/middleware/callbacks.rb:36:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'
web-console (3.5.1) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.5.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `catch'
web-console (3.5.1) lib/web_console/middleware.rb:18:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.0.3) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.0.3) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.0.3) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.0.3) lib/rails/rack/logger.rb:24:in `call'
sprockets-rails (3.2.0) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/request_id.rb:24:in `call'
rack (2.0.3) lib/rack/method_override.rb:22:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.0.3) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.0.3) lib/action_dispatch/middleware/static.rb:136:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.0.3) lib/rails/engine.rb:522:in `call'
puma (3.9.0) lib/puma/configuration.rb:224:in `call'
puma (3.9.0) lib/puma/server.rb:602:in `handle_request'
puma (3.9.0) lib/puma/server.rb:435:in `process_client'
puma (3.9.0) lib/puma/server.rb:299:in `block in run'
puma (3.9.0) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (5.5ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (7.5ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.3ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (259.7ms)
Started GET "/" for 127.0.0.1 at 2017-11-29 19:33:09 +0300
  [1m[36mActiveRecord::SchemaMigration Load (7.1ms)[0m  [1m[34mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (3.8ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (46.0ms)
Completed 200 OK in 820ms (Views: 753.5ms | ActiveRecord: 20.0ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:33:11 +0300
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:33:11 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (3.3ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
  [1m[36mSeance Load (5.3ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 3.3ms)


Completed 500 Internal Server Error in 27ms (ActiveRecord: 5.3ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
app/controllers/app_controller.rb:32:in `db'
  
app/controllers/app_controller.rb:26:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (1.3ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.9ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.0ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (550.7ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (460.9ms)
Started GET "/" for 127.0.0.1 at 2017-11-29 19:34:31 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (6.1ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (42.4ms)
Completed 200 OK in 226ms (Views: 200.8ms | ActiveRecord: 6.1ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:34:32 +0300
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:34:32 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (6.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
  [1m[36mSeance Load (2.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 6.1ms)


Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.1ms)


  
  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
  
app/controllers/app_controller.rb:26:in `db'
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (1.5ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (1.1ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.3ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.4ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.3ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.0ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (310.3ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (389.3ms)
Started GET "/sign_in" for 127.0.0.1 at 2017-11-29 19:34:32 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (1.3ms)
  Rendered devise/sessions/new.html.erb within layouts/application (50.1ms)
Completed 200 OK in 176ms (Views: 142.3ms | ActiveRecord: 9.3ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2017-11-29 19:34:38 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"FVYw5bUGmRtwmqZFFkm+u6R16gUp82ck5azTFR6h/byP2BGLDtQ9Rz/xgxL+K3+bsy26swddC/Fe8EyH6K+DYQ==", "user"=>{"email"=>"admin", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Вход"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (12.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2017-11-29 16:34:38.598542"], ["last_sign_in_at", "2017-10-25 08:31:06.302259"], ["sign_in_count", 21], ["updated_at", "2017-11-29 16:34:38.601280"], ["id", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 302 Found in 243ms (ActiveRecord: 18.6ms)


Started GET "/" for 127.0.0.1 at 2017-11-29 19:34:38 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (2.3ms)
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.8ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 128ms (Views: 105.6ms | ActiveRecord: 2.7ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:34:38 +0300
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:34:38 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (3.9ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
  [1m[36mSeance Load (1.5ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 3.9ms)


Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.5ms)


  
  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
  
app/controllers/app_controller.rb:32:in `db'
app/controllers/app_controller.rb:26:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.6ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.0ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.9ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.0ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.7ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (253.9ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (319.1ms)
Started GET "/seances" for 127.0.0.1 at 2017-11-29 19:34:45 +0300
Processing by SeancesController#index as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.9ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (10.8ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017')[0m
  Rendering seances/index.html.erb within layouts/application
  Rendered seances/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 143ms (Views: 108.1ms | ActiveRecord: 18.2ms)


Started GET "/seances/generator" for 127.0.0.1 at 2017-11-29 19:34:47 +0300
Processing by SeancesController#generator as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/generator.html.erb within layouts/application
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.5ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  [1m[36mDoctor Load (1.9ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  Rendered seances/generator.html.erb within layouts/application (27.2ms)
Completed 200 OK in 96ms (Views: 80.0ms | ActiveRecord: 10.6ms)


Started GET "/app/db?to_find=is_schedule&date=29-11-2017&doctor_id=1" for 127.0.0.1 at 2017-11-29 19:34:53 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "date"=>"29-11-2017", "doctor_id"=>"1"}
  [1m[36mSeance Load (5.5ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017' and doctor_id = '1')[0m
Completed 200 OK in 8ms (Views: 0.4ms | ActiveRecord: 5.5ms)


Started GET "/seances/generate?utf8=%E2%9C%93&affilate_id=1&date=29-11-2017&doctor=1&start_hour=6&start_minute=0&end_hour=15&end_minute=0&break=0&length=20" for 127.0.0.1 at 2017-11-29 19:34:58 +0300
Processing by SeancesController#generate as HTML
  Parameters: {"utf8"=>"✓", "affilate_id"=>"1", "date"=>"29-11-2017", "doctor"=>"1", "start_hour"=>"6", "start_minute"=>"0", "end_hour"=>"15", "end_minute"=>"0", "break"=>"0", "length"=>"20"}
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.7ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (3.7ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017' and doctor_id = '1')[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (5.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.280511"], ["updated_at", "2017-11-29 16:34:58.280511"], ["date", "2017-11-29 03:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.292824"], ["updated_at", "2017-11-29 16:34:58.292824"], ["date", "2017-11-29 03:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.296889"], ["updated_at", "2017-11-29 16:34:58.296889"], ["date", "2017-11-29 03:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.300880"], ["updated_at", "2017-11-29 16:34:58.300880"], ["date", "2017-11-29 04:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.304638"], ["updated_at", "2017-11-29 16:34:58.304638"], ["date", "2017-11-29 04:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.309944"], ["updated_at", "2017-11-29 16:34:58.309944"], ["date", "2017-11-29 04:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.313734"], ["updated_at", "2017-11-29 16:34:58.313734"], ["date", "2017-11-29 05:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.317616"], ["updated_at", "2017-11-29 16:34:58.317616"], ["date", "2017-11-29 05:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.321235"], ["updated_at", "2017-11-29 16:34:58.321235"], ["date", "2017-11-29 05:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.325980"], ["updated_at", "2017-11-29 16:34:58.325980"], ["date", "2017-11-29 06:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.329742"], ["updated_at", "2017-11-29 16:34:58.329742"], ["date", "2017-11-29 06:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.333438"], ["updated_at", "2017-11-29 16:34:58.333438"], ["date", "2017-11-29 06:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.337050"], ["updated_at", "2017-11-29 16:34:58.337050"], ["date", "2017-11-29 07:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.341113"], ["updated_at", "2017-11-29 16:34:58.341113"], ["date", "2017-11-29 07:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.345541"], ["updated_at", "2017-11-29 16:34:58.345541"], ["date", "2017-11-29 07:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.349335"], ["updated_at", "2017-11-29 16:34:58.349335"], ["date", "2017-11-29 08:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.353412"], ["updated_at", "2017-11-29 16:34:58.353412"], ["date", "2017-11-29 08:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.357734"], ["updated_at", "2017-11-29 16:34:58.357734"], ["date", "2017-11-29 08:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.362066"], ["updated_at", "2017-11-29 16:34:58.362066"], ["date", "2017-11-29 09:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.365872"], ["updated_at", "2017-11-29 16:34:58.365872"], ["date", "2017-11-29 09:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.369535"], ["updated_at", "2017-11-29 16:34:58.369535"], ["date", "2017-11-29 09:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.373502"], ["updated_at", "2017-11-29 16:34:58.373502"], ["date", "2017-11-29 10:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.378134"], ["updated_at", "2017-11-29 16:34:58.378134"], ["date", "2017-11-29 10:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.381834"], ["updated_at", "2017-11-29 16:34:58.381834"], ["date", "2017-11-29 10:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.385525"], ["updated_at", "2017-11-29 16:34:58.385525"], ["date", "2017-11-29 11:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.389245"], ["updated_at", "2017-11-29 16:34:58.389245"], ["date", "2017-11-29 11:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:34:58.394052"], ["updated_at", "2017-11-29 16:34:58.394052"], ["date", "2017-11-29 11:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/seances?date=29-11-2017
Completed 302 Found in 214ms (ActiveRecord: 49.8ms)


Started GET "/seances?date=29-11-2017" for 127.0.0.1 at 2017-11-29 19:34:58 +0300
Processing by SeancesController#index as HTML
  Parameters: {"date"=>"29-11-2017"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (0.9ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017')[0m
  [1m[36mDoctor Load (0.5ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/index.html.erb within layouts/application
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered seances/index.html.erb within layouts/application (53.8ms)
Completed 200 OK in 155ms (Views: 118.6ms | ActiveRecord: 3.5ms)


Started GET "/seances/generator" for 127.0.0.1 at 2017-11-29 19:35:08 +0300
Processing by SeancesController#generator as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/generator.html.erb within layouts/application
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  Rendered seances/generator.html.erb within layouts/application (5.8ms)
Completed 200 OK in 102ms (Views: 93.2ms | ActiveRecord: 1.7ms)


Started GET "/" for 127.0.0.1 at 2017-11-29 19:37:03 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (0.8ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (26.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 228ms (Views: 213.8ms | ActiveRecord: 1.9ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:37:03 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (2.9ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.9ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:26:in `db'
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:37:03 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (1.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.4ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.9ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.6ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.0ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.8ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.4ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (279.0ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.1ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (230.3ms)
Started GET "/seances" for 127.0.0.1 at 2017-11-29 19:38:45 +0300
Processing by SeancesController#index as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.6ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (17.0ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017')[0m
  [1m[36mDoctor Load (0.9ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/index.html.erb within layouts/application
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.2ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered seances/index.html.erb within layouts/application (57.7ms)
Completed 200 OK in 428ms (Views: 328.1ms | ActiveRecord: 22.1ms)


Started GET "/" for 127.0.0.1 at 2017-11-29 19:38:48 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (0.5ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (2.4ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 99ms (Views: 93.5ms | ActiveRecord: 1.2ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:38:48 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:38:48 +0300
  [1m[36mSeance Load (1.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.4ms)


Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:38:48 +0300
Processing by AppController#db as */*
  
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
Processing by AppController#db as */*
  [1m[36mSeance Load (2.0ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
  
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 2.0ms)


app/controllers/app_controller.rb:26:in `db'
  
  [1m[36mSeance Load (2.0ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
Completed 500 Internal Server Error in 65ms (ActiveRecord: 2.0ms)


  
  
app/controllers/app_controller.rb:26:in `db'
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:38:48 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (1.3ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.3ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.6ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.7ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.7ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.0ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.6ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.8ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.6ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.6ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (640.1ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.8ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (517.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (627.7ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.1ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (276.5ms)
Started GET "/seances" for 127.0.0.1 at 2017-11-29 19:38:53 +0300
Processing by SeancesController#index as HTML
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.5ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (18.3ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017')[0m
  [1m[36mDoctor Load (1.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/index.html.erb within layouts/application
  [1m[36mAffilate Load (0.8ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered seances/index.html.erb within layouts/application (63.7ms)
Completed 200 OK in 230ms (Views: 144.4ms | ActiveRecord: 24.4ms)


Started GET "/seances/generator" for 127.0.0.1 at 2017-11-29 19:39:04 +0300
Processing by SeancesController#generator as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/generator.html.erb within layouts/application
  [1m[36mAffilate Load (0.6ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mAffilate Load (2.2ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT "doctors".* FROM "doctors"[0m
  Rendered seances/generator.html.erb within layouts/application (10.8ms)
Completed 200 OK in 110ms (Views: 98.7ms | ActiveRecord: 4.4ms)


Started GET "/app/db?to_find=is_schedule&date=05-12-2017&doctor_id=1" for 127.0.0.1 at 2017-11-29 19:39:09 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "date"=>"05-12-2017", "doctor_id"=>"1"}
  [1m[36mSeance Load (2.0ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '05-12-2017' and doctor_id = '1')[0m
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 2.0ms)


Started GET "/seances/generate?utf8=%E2%9C%93&affilate_id=1&date=05-12-2017&doctor=1&start_hour=6&start_minute=0&end_hour=15&end_minute=0&break=0&length=20" for 127.0.0.1 at 2017-11-29 19:39:14 +0300
Processing by SeancesController#generate as HTML
  Parameters: {"utf8"=>"✓", "affilate_id"=>"1", "date"=>"05-12-2017", "doctor"=>"1", "start_hour"=>"6", "start_minute"=>"0", "end_hour"=>"15", "end_minute"=>"0", "break"=>"0", "length"=>"20"}
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (1.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '05-12-2017' and doctor_id = '1')[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.7ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.287465"], ["updated_at", "2017-11-29 16:39:14.287465"], ["date", "2017-12-05 03:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.292884"], ["updated_at", "2017-11-29 16:39:14.292884"], ["date", "2017-12-05 03:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.297807"], ["updated_at", "2017-11-29 16:39:14.297807"], ["date", "2017-12-05 03:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.303253"], ["updated_at", "2017-11-29 16:39:14.303253"], ["date", "2017-12-05 04:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.307298"], ["updated_at", "2017-11-29 16:39:14.307298"], ["date", "2017-12-05 04:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.311524"], ["updated_at", "2017-11-29 16:39:14.311524"], ["date", "2017-12-05 04:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.319292"], ["updated_at", "2017-11-29 16:39:14.319292"], ["date", "2017-12-05 05:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.323496"], ["updated_at", "2017-11-29 16:39:14.323496"], ["date", "2017-12-05 05:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.327604"], ["updated_at", "2017-11-29 16:39:14.327604"], ["date", "2017-12-05 05:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.332713"], ["updated_at", "2017-11-29 16:39:14.332713"], ["date", "2017-12-05 06:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.337176"], ["updated_at", "2017-11-29 16:39:14.337176"], ["date", "2017-12-05 06:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.340953"], ["updated_at", "2017-11-29 16:39:14.340953"], ["date", "2017-12-05 06:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.344771"], ["updated_at", "2017-11-29 16:39:14.344771"], ["date", "2017-12-05 07:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.350093"], ["updated_at", "2017-11-29 16:39:14.350093"], ["date", "2017-12-05 07:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.354153"], ["updated_at", "2017-11-29 16:39:14.354153"], ["date", "2017-12-05 07:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.358102"], ["updated_at", "2017-11-29 16:39:14.358102"], ["date", "2017-12-05 08:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.362131"], ["updated_at", "2017-11-29 16:39:14.362131"], ["date", "2017-12-05 08:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.367163"], ["updated_at", "2017-11-29 16:39:14.367163"], ["date", "2017-12-05 08:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.371358"], ["updated_at", "2017-11-29 16:39:14.371358"], ["date", "2017-12-05 09:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.375259"], ["updated_at", "2017-11-29 16:39:14.375259"], ["date", "2017-12-05 09:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.379373"], ["updated_at", "2017-11-29 16:39:14.379373"], ["date", "2017-12-05 09:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.384420"], ["updated_at", "2017-11-29 16:39:14.384420"], ["date", "2017-12-05 10:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.388315"], ["updated_at", "2017-11-29 16:39:14.388315"], ["date", "2017-12-05 10:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.392354"], ["updated_at", "2017-11-29 16:39:14.392354"], ["date", "2017-12-05 10:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.396696"], ["updated_at", "2017-11-29 16:39:14.396696"], ["date", "2017-12-05 11:00:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.401521"], ["updated_at", "2017-11-29 16:39:14.401521"], ["date", "2017-12-05 11:20:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "seances" ("created_at", "updated_at", "date", "doctor_id", "affilate_id") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["created_at", "2017-11-29 16:39:14.405463"], ["updated_at", "2017-11-29 16:39:14.405463"], ["date", "2017-12-05 11:40:00"], ["doctor_id", 1], ["affilate_id", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/seances?date=05-12-2017
Completed 302 Found in 133ms (ActiveRecord: 36.2ms)


Started GET "/seances?date=05-12-2017" for 127.0.0.1 at 2017-11-29 19:39:14 +0300
Processing by SeancesController#index as HTML
  Parameters: {"date"=>"05-12-2017"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.2ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (0.6ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '05-12-2017')[0m
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/index.html.erb within layouts/application
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered seances/index.html.erb within layouts/application (46.3ms)
Completed 200 OK in 162ms (Views: 123.6ms | ActiveRecord: 2.9ms)


Started GET "/" for 127.0.0.1 at 2017-11-29 19:39:16 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (0.5ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (3.1ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 88ms (Views: 82.7ms | ActiveRecord: 1.2ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:39:16 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (1.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.1ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:26:in `db'
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:39:16 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (1.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.4ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.6ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.7ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.2ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.7ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (324.2ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (271.8ms)
Started GET "/seances" for 127.0.0.1 at 2017-11-29 19:39:17 +0300
Processing by SeancesController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (1.2ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (1.0ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017')[0m
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/index.html.erb within layouts/application
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered seances/index.html.erb within layouts/application (50.7ms)
Completed 200 OK in 185ms (Views: 132.1ms | ActiveRecord: 4.7ms)


Started GET "/" for 127.0.0.1 at 2017-11-29 19:39:18 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (3.4ms)
Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:39:18 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (4.9ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 11ms (ActiveRecord: 4.9ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:26:in `db'
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:39:18 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (4.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 8ms (ActiveRecord: 4.1ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (1.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 280ms (Views: 274.0ms | ActiveRecord: 2.6ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:39:18 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (2.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.1ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:26:in `db'
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:39:18 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (6.8ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
Completed 500 Internal Server Error in 10ms (ActiveRecord: 6.8ms)


  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.8ms)
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.1ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (255.0ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.7ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (169.2ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.8ms)
Started GET "/seances" for 127.0.0.1 at 2017-11-29 19:39:19 +0300
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
Processing by SeancesController#index as HTML
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.7ms)
  [1m[36mUser Load (47.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (1.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (198.0ms)
  [1m[36mSeance Load (2.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017')[0m
  [1m[36mDoctor Load (1.3ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/index.html.erb within layouts/application
  [1m[36mAffilate Load (0.5ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (1.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (188.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered seances/index.html.erb within layouts/application (227.0ms)
Completed 200 OK in 414ms (Views: 310.6ms | ActiveRecord: 53.7ms)


Started GET "/app/db?to_find=is_schedule&date=06-11-2017" for 127.0.0.1 at 2017-11-29 19:39:21 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "date"=>"06-11-2017"}
  [1m[36mSeance Load (0.3ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '06-11-2017' and doctor_id = NULL)[0m
Completed 200 OK in 2ms (Views: 0.2ms | ActiveRecord: 0.3ms)


Started GET "/seances?utf8=%E2%9C%93&date=06-11-2017" for 127.0.0.1 at 2017-11-29 19:39:22 +0300
Processing by SeancesController#index as HTML
  Parameters: {"utf8"=>"✓", "date"=>"06-11-2017"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (0.8ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '06-11-2017')[0m
  Rendering seances/index.html.erb within layouts/application
  Rendered seances/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 163ms (Views: 149.3ms | ActiveRecord: 1.8ms)


Started GET "/app/db?to_find=is_schedule&date=01-11-2017" for 127.0.0.1 at 2017-11-29 19:39:25 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "date"=>"01-11-2017"}
  [1m[36mSeance Load (0.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '01-11-2017' and doctor_id = NULL)[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started GET "/seances?utf8=%E2%9C%93&date=01-11-2017" for 127.0.0.1 at 2017-11-29 19:39:26 +0300
Processing by SeancesController#index as HTML
  Parameters: {"utf8"=>"✓", "date"=>"01-11-2017"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.2ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (0.5ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '01-11-2017')[0m
  Rendering seances/index.html.erb within layouts/application
  Rendered seances/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 115ms (Views: 106.6ms | ActiveRecord: 1.1ms)


Started GET "/app/db?to_find=is_schedule&date=07-11-2017" for 127.0.0.1 at 2017-11-29 19:39:28 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "date"=>"07-11-2017"}
  [1m[36mSeance Load (0.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '07-11-2017' and doctor_id = NULL)[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.4ms)


Started GET "/seances?utf8=%E2%9C%93&date=07-11-2017" for 127.0.0.1 at 2017-11-29 19:39:29 +0300
Processing by SeancesController#index as HTML
  Parameters: {"utf8"=>"✓", "date"=>"07-11-2017"}
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (0.6ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '07-11-2017')[0m
  Rendering seances/index.html.erb within layouts/application
  Rendered seances/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 141ms (Views: 129.8ms | ActiveRecord: 3.1ms)


Started GET "/seances" for 127.0.0.1 at 2017-11-29 19:39:33 +0300
Processing by SeancesController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mSeance Load (0.9ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '29-11-2017')[0m
  [1m[36mDoctor Load (0.7ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering seances/index.html.erb within layouts/application
  [1m[36mAffilate Load (0.4ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered seances/index.html.erb within layouts/application (84.1ms)
Completed 200 OK in 242ms (Views: 175.8ms | ActiveRecord: 4.2ms)


Started GET "/" for 127.0.0.1 at 2017-11-29 19:40:26 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (1.0ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (3.3ms)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 94ms (Views: 86.3ms | ActiveRecord: 1.9ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:40:26 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (1.2ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.2ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:26:in `db'
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:40:27 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (1.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.1ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (0.7ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.8ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.0ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.8ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (264.4ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (320.6ms)
Started GET "/app/db?to_find=doctor&date=04-12-2017&affilate=1" for 127.0.0.1 at 2017-11-29 19:40:29 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"doctor", "date"=>"04-12-2017", "affilate"=>"1"}
  [1m[36mSeance Load (0.9ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '04-12-2017' and affilate_id = '1')[0m
Completed 200 OK in 3ms (Views: 0.3ms | ActiveRecord: 0.9ms)


Started GET "/app/db?to_find=seance&date=04-12-2017&doctor_id=undefined" for 127.0.0.1 at 2017-11-29 19:40:29 +0300
Started GET "/app/db?to_find=is_schedule&doctor_id=undefined" for 127.0.0.1 at 2017-11-29 19:40:29 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"04-12-2017", "doctor_id"=>"undefined"}
Processing by AppController#db as */*
  [1m[36mSeance Load (2.5ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '04-12-2017' and doctor_id = 'undefined')[0m
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"undefined"}
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.5ms)


  
  [1m[36mSeance Load (2.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'undefined')[0m
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "undefined"
LINE 1: ...ate, 'DD-MM-YYYY') = '04-12-2017' and doctor_id = 'undefined...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '04-12-2017' and doctor_id = 'undefined')):
Completed 500 Internal Server Error in 4ms (ActiveRecord: 2.4ms)


  
  
app/controllers/app_controller.rb:26:in `db'
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "undefined"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'undefined...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'undefined')):
  
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (1.2ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.3ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.4ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (281.6ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (2.2ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (0.9ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (2.2ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (242.7ms)
Started GET "/app/db?to_find=doctor&date=05-12-2017&affilate=1" for 127.0.0.1 at 2017-11-29 19:40:31 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"doctor", "date"=>"05-12-2017", "affilate"=>"1"}
  [1m[36mSeance Load (2.4ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '05-12-2017' and affilate_id = '1')[0m
  [1m[36mDoctor Load (0.6ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 63ms (Views: 0.6ms | ActiveRecord: 4.0ms)


Started GET "/app/db?to_find=seance&date=05-12-2017&doctor_id=1" for 127.0.0.1 at 2017-11-29 19:40:31 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"05-12-2017", "doctor_id"=>"1"}
Started GET "/app/db?to_find=is_schedule&doctor_id=1" for 127.0.0.1 at 2017-11-29 19:40:31 +0300
  [1m[36mSeance Load (1.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '05-12-2017' and doctor_id = '1')[0m
Completed 200 OK in 8ms (Views: 0.7ms | ActiveRecord: 1.1ms)


Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"1"}
  [1m[36mSeance Load (0.6ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = '1')[0m
Completed 200 OK in 4ms (Views: 0.4ms | ActiveRecord: 0.6ms)


Started GET "/app/db?to_find=doctor&date=05-12-2017&affilate=1" for 127.0.0.1 at 2017-11-29 19:40:35 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"doctor", "date"=>"05-12-2017", "affilate"=>"1"}
  [1m[36mSeance Load (2.1ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '05-12-2017' and affilate_id = '1')[0m
  [1m[36mDoctor Load (0.4ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCACHE (0.1ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 40ms (Views: 0.4ms | ActiveRecord: 3.1ms)


Started GET "/app/db?to_find=seance&date=05-12-2017&doctor_id=1" for 127.0.0.1 at 2017-11-29 19:40:35 +0300
Started GET "/app/db?to_find=is_schedule&doctor_id=1" for 127.0.0.1 at 2017-11-29 19:40:35 +0300
Processing by AppController#db as */*
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"05-12-2017", "doctor_id"=>"1"}
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"1"}
  [1m[36mSeance Load (1.6ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '05-12-2017' and doctor_id = '1')[0m
  [1m[36mSeance Load (0.6ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = '1')[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 1.6ms)


Completed 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.6ms)


Started GET "/app/add?utf8=%E2%9C%93&last_name=%D0%91%D0%B0%D0%BB%D0%B8%D1%85%D0%B8%D0%BD&name=%D0%9D%D0%B8%D0%BA%D0%B8%D1%82%D0%B0+%D0%95%D0%B2%D0%B3%D0%B5%D0%BD%D1%8C%D0%B5%D0%B2%D0%B8%D1%87+%D0%91%D0%B0%D0%BB%D0%B8%D1%85%D0%B8%D0%BD&patronymic=njkbkjb+jm&birthdate=09-11-2017&is_moscow=on&email=ramiro.cruz%40mail.ru&phone=84953791228&affilate=1&datepicker=05-12-2017&doctor=1&seance=287" for 127.0.0.1 at 2017-11-29 19:40:54 +0300
Processing by AppController#add as HTML
  Parameters: {"utf8"=>"✓", "last_name"=>"Балихин", "name"=>"Никита Евгеньевич Балихин", "patronymic"=>"njkbkjb jm", "birthdate"=>"09-11-2017", "is_moscow"=>"on", "email"=>"ramiro.cruz@mail.ru", "phone"=>"84953791228", "affilate"=>"1", "datepicker"=>"05-12-2017", "doctor"=>"1", "seance"=>"287"}
  [1m[36mClient Load (2.5ms)[0m  [1m[34mSELECT "clients".* FROM "clients" WHERE (name = 'Никита Евгеньевич Балихин' and last_name = 'Балихин' and phone = '84953791228')[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (2.3ms)[0m  [1m[32mINSERT INTO "clients" ("created_at", "updated_at", "last_name", "name", "patronymic", "email", "phone", "birthdate", "is_moscow") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["created_at", "2017-11-29 16:40:54.333084"], ["updated_at", "2017-11-29 16:40:54.333084"], ["last_name", "Балихин"], ["name", "Никита Евгеньевич Балихин"], ["patronymic", "njkbkjb jm"], ["email", "ramiro.cruz@mail.ru"], ["phone", "84953791228"], ["birthdate", "2017-11-09"], ["is_moscow", "on"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mSeance Load (0.3ms)[0m  [1m[34mSELECT  "seances".* FROM "seances" WHERE "seances"."id" = $1 LIMIT $2[0m  [["id", 287], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "seances" SET "client_id" = $1, "updated_at" = $2 WHERE "seances"."id" = $3[0m  [["client_id", 10], ["updated_at", "2017-11-29 16:40:54.344838"], ["id", 287]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/app/show?seance_id=287
Completed 302 Found in 44ms (ActiveRecord: 11.5ms)


Started GET "/app/show?seance_id=287" for 127.0.0.1 at 2017-11-29 19:40:54 +0300
Processing by AppController#show as HTML
  Parameters: {"seance_id"=>"287"}
  [1m[36mSeance Load (0.5ms)[0m  [1m[34mSELECT  "seances".* FROM "seances" WHERE "seances"."id" = $1 LIMIT $2[0m  [["id", 287], ["LIMIT", 1]]
  [1m[36mClient Load (0.6ms)[0m  [1m[34mSELECT  "clients".* FROM "clients" WHERE "clients"."id" = $1 LIMIT $2[0m  [["id", 10], ["LIMIT", 1]]
  Rendering app/show.html.erb within layouts/application
  [1m[36mDoctor Load (0.2ms)[0m  [1m[34mSELECT  "doctors".* FROM "doctors" WHERE "doctors"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendered app/show.html.erb within layouts/application (4.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 153ms (Views: 127.5ms | ActiveRecord: 2.1ms)


Started GET "/" for 127.0.0.1 at 2017-11-29 19:41:33 +0300
Processing by AppController#new as HTML
  Rendering app/new.html.erb within layouts/application
  [1m[36mAffilate Load (1.1ms)[0m  [1m[34mSELECT "affilates".* FROM "affilates" WHERE (name != 'Admin')[0m
  Rendered app/new.html.erb within layouts/application (6.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mAffilate Load (0.3ms)[0m  [1m[34mSELECT  "affilates".* FROM "affilates" WHERE "affilates"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 200 OK in 134ms (Views: 127.0ms | ActiveRecord: 2.1ms)


Started GET "/app/db?to_find=seance&date=&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:41:34 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"seance", "date"=>"", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (2.5ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.5ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...(to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = '' and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:26:in `db'
Started GET "/app/db?to_find=is_schedule&doctor_id=%D0%9D%D0%B5%D1%82+%D1%81%D0%B2%D0%BE%D0%B1%D0%BE%D0%B4%D0%BD%D1%8B%D1%85+%D0%B2%D1%80%D0%B0%D1%87%D0%B5%D0%B9" for 127.0.0.1 at 2017-11-29 19:41:34 +0300
Processing by AppController#db as */*
  Parameters: {"to_find"=>"is_schedule", "doctor_id"=>"Нет свободных врачей"}
  [1m[36mSeance Load (1.2ms)[0m  [1m[34mSELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 1.2ms)


  
ActiveRecord::StatementInvalid (PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: "Нет свободных врачей"
LINE 1: ...o_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свобо...
                                                             ^
: SELECT "seances".* FROM "seances" WHERE (to_char(date, 'DD-MM-YYYY') = NULL and doctor_id = 'Нет свободных врачей')):
  
app/controllers/app_controller.rb:32:in `db'
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (1.4ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_source.text.erb (1.1ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.4ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_trace.text.erb (1.4ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (1.7ms)
  Rendering /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (281.6ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.text.erb (0.9ms)
  Rendered /Users/LNDSLD/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/actionpack-5.0.3/lib/action_dispatch/middleware/templates/rescues/diagnostics.text.erb (337.5ms)
